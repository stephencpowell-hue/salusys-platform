---
const props = Astro.props as { href?: string; class?: string };

const href = props.href ?? "#";
const className = props.class ?? "";

const isExternal =
  href.startsWith("http://") ||
  href.startsWith("https://") ||
  href.startsWith("mailto:") ||
  href.startsWith("tel:") ||
  href.startsWith("#");

const base = import.meta.env.BASE_URL || "/";

// Normalize internal hrefs to respect the base path
const cleaned = href.startsWith("/") ? href.slice(1) : href;

const finalHref = isExternal
  ? href
  : cleaned.startsWith("salusys-platform/")
    ? `/${cleaned}`
    : `${base}${cleaned}`;
---

<a href={finalHref} class={className}>
  <slot />
</a>
